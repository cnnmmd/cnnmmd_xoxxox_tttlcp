FROM ubuntu:22.04

ENV OPTAPT=""
#ENV OPTAPT="-o Acquire::AllowInsecureRepositories=true -o Acquire::AllowDowngradeToInsecureRepositories=true"
RUN \
  apt-get ${OPTAPT} -y update && \
  apt-get ${OPTAPT} -y upgrade && \
  apt-get ${OPTAPT} -y install python3 python3-pip python-is-python3 && \
  apt-get ${OPTAPT} -y install build-essential cmake ninja-build libopenblas-dev && \
  rm -rf /var/lib/apt/lists/*
RUN pip3 install --no-cache-dir llama-cpp-python --extra-index-url https://abetlen.github.io/llama-cpp-python/whl/cu125
RUN pip3 install --no-cache-dir aiohttp
